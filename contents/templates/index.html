{% extends 'base.html' %}

{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>상세 페이지</title>

    <style>
        .FeedBoxCont {
            width: 1400px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            margin: 0 0 0 100px;
        }

        .FeedBox {
            display: flex;
            width: 300px;
            height: 400px;
            margin-top: 30px;

        }
    </style>

</head>
<body>
    <div style="width: 1350px; background-color: #fafafa; border: solid 1px #aaaaaa; box-shadow: 1px 1px 1px 1px #aaaaaa; margin: 30px 0 0 100px;">
        <div style="width: 1350px; min-width: 1350px; height: 800px; min-height: 800px;">
            <div style="display: flex; flex-direction: row; justify-content: space-between; height: 40px; border: solid 1px #aaaaaa;">
                <div style="display: flex; flex-direction: row;">
                    <img src="{% get_media_prefix %}{{feeds.user.profile_image }}" alt="" style="width: 20px; height: 20px; border-radius: 10px; margin: 10px 5px 0 5px;">
                    <div style="font-weight: bold; margin-top: 7px ;">{{ feeds.user.nickname }}</div>
                </div>
                <div style="font-weight: bold; margin: 3px 10px 0 0;">...</div>
            </div>
            <div
                style="display: flex; flex-direction: row; width: 1000px; min-width: 1000px; height: 600px; min-height: 600px;">
                <img style="cursor: pointer; width: 1000px; min-width: 1000px; height: 600px; min-height: 600px; object-fit: contain; background-color: black;" src="{% get_media_prefix %}{{ feeds.image }}">
                <div style="width: 350px; min-width: 350px; height: 600px; min-height: 600px; background-color: white; box-shadow: inset 0 0 3px  #aaaaaa;">
                    {% for comment in comments %}
                    <b>{{ comment.user.nickname }}</b>
                    {{ comment.comment }}<br>
                    <form  action="{% url 'contents:delete_comment' comment.id %}" method="POST">
                      {% csrf_token %}
                      <input type="submit" value='댓글 삭제'>
                      </form>
                    {% endfor %}
                </div>
            </div>
            <div style="display: flex; flex-direction: row; width: 1000px; min-width: 1000px; height: 160px; min-height: 160px;">
                <div style="display: flex; flex-direction: column; width: 1000px; min-width: 1000px;">
                    <div style="display: flex; flex-direction: row; justify-content: space-between;">
                        <div style="font-size: 12pt; font-weight: bold; margin: 5px 0 0 10px;">
                            {{ feeds.title }}
                        </div>
                        <div>
                            <img src="/static/icon/heart.png" alt="" style="width: 20px; height: 20px; margin: 5px 10px 0 0;">
                        </div>
                    </div>
                    <div style="font-size: 10pt; font-weight: normal; margin: 0 0 0 10px; color: #aaaaaa;">
                        {{ feeds.category }}
                    </div>
                    <div style="font-size: 10pt; font-weight: normal; margin: 0 0 0 10px; color: #aaaaaa;">
                        {{ feeds.content }}
                    </div>
                    <div style="display: flex; flex-direction: row; margin: 3px 0 0 8px;">
                        {% if feeds.tags %}
                        {% for tag in feeds.tags.all %}
                        <span
                            style="height: 18px; background-color: #aaaaaa; color: #fafafa; border-radius: 5px; font-size: 10pt; margin-left: 3px; padding-left: 3px; padding-right: 3px;">
                            #{{ tag.name }}
                        </span>
                        </a>
                        {% endfor %}
                        {% endif %}<br>
                    </div>
                    <div style="display: flex; flex-direction: row; justify-content: space-between;">
                        <div style="display: flex; flex-direction: row; margin: 3px 0 0 8px;">
                            {% if feeds.user == request.user %}
                            <button onclick="location.href='{% url 'contents:post_delete' feeds.id %}'">삭제</button>
                            <button onclick="location.href='{% url 'contents:post_update' feeds.id %}'">수정</button>
                            {% elif feeds.user == request.user and comment.comment %}
                            <button onclick="location.href='{% url 'contents:post_delete' feeds.id %}'">삭제</button>
                            {% endif %}
                        </div>
                        <div style="text-align: right; margin-right: 10px; font-size: 10pt; color: #aaaaaa;">
                            {{ feeds.created_at | timesince }} 전
                        </div>
                    </div>
                </div>
                <div style="width: 350px; min-width: 350px; height: 160px; min-height: 160px; background-color: #fafafa; border-left: solid 1px #aaaaaa;">
                    <form  action="comment/{{ feeds.id }}" method="POST">
                        {% csrf_token %}
                        <div>
                            <div style="margin: 5px 0 0 10px;">
                                <textarea style="width: 310px; height: 100px; margin: 10px 0 0 10px; resize: none;" placeholder="댓글을 입력하세요.." name="comment"></textarea>
                                <div style="display: flex; flex-direction: row; justify-content: space-between;">
                                    <div style="width: 40px;"></div>
                                    <button style="margin-right: 20px;" type="submit">입력</button>
                                </div>
                            </div>            
                                                           
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="FeedBoxCont">
        {% for same_feed_category in same_feed_categorys %}
        <div class="FeedBox"
            style="background-color: #fafafa; border: solid 1px #aaaaaa; box-shadow: 1px 1px 1px 1px #aaaaaa;">
            <div style="width: 300px; min-width: 300px; height: 400px; min-height: 400px;">
                <div style="display: flex; flex-direction: row; justify-content: space-between; height: 40px;">
                    <div style="display: flex; flex-direction: row;""><img src=" {% get_media_prefix %}{{same_feed_category.user.profile_image }}" alt=""
                        style="width: 20px; height: 20px; border-radius: 10px; margin: 10px 5px 0 5px;">
                        <div style="font-weight: bold; margin-top: 7px ;">{{ same_feed_category.user.nickname }}</div>
                    </div>
                    <div style="font-weight: bold; margin: 3px 10px 0 0;">...</div>
                </div>
                <div style="width: 300px; min-width: 300px; height: 280px; min-height: 280px;">
                    <img onclick="location.href='/contents/detail/{{ same_feed_category.id }}'"
                        style="cursor: pointer; width: 300px; min-width: 300px; height: 280px; min-height: 280px; object-fit: cover;"
                        src="{% get_media_prefix %}{{ same_feed_category.image }}">
                </div>
                <div style="display: flex; flex-direction: row; justify-content: space-between;">
                    <div style="font-size: 12pt; font-weight: bold; margin: 5px 0 0 10px;">{{ same_feed_category.title }}</div>
                    <div><img src="/static/icon/heart.png" alt=""
                            style="width: 20px; height: 20px; margin: 5px 10px 0 0;"></div>
                </div>
                <div style="font-size: 10pt; font-weight: normal; margin: 0 0 0 10px; color: #aaaaaa;">
                    {{ same_feed_category.category }}</div>
                <div style="display: flex; flex-direction: row; justify-content: space-between;">
                    <div style="display: flex; flex-direction: row; margin: 3px 0 0 8px;">
                        {% if same_feed_category.tags %}
                        {% for tag in same_feed_category.tags.all %}
                        <span
                            style="height: 18px; background-color: #aaaaaa; color: #fafafa; border-radius: 5px; font-size: 10pt; margin-left: 3px; padding-left: 3px; padding-right: 3px;">
                            #{{ tag.name }}
                        </span>
                        </a>
                        {% endfor %}
                        {% endif %}<br>
                    </div>
                    <div style="text-align: right; margin-right: 10px; font-size: 10pt; color: #aaaaaa;">
                        {{ same_feed_category.created_at | timesince }} 전
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>



</body>

</html>

{% endblock %}

